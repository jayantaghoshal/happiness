- job:
    name: icup_android_progression
    # TODO: temp_only_high_because_right_now_repo_is_not_installed_on_low
    # TODO: The script is not even using repo????, node-filter not relevant            
    node: high 
    description: DO NOT EDIT MANUALLY THROUGH JENKINS WEB UI - Config in vendor/volvocars/tools/ci/jenkins_job_builder
    
    triggers:
        - gerrit:  
            server-name: 'iCUP Android Gerrit'
            silent: true
            trigger-on: 
                - change-merged-event 
            projects:
                - project-compare-type: 'PLAIN'
                  project-pattern: 'vendor/volvocars/apps/ihu_test'
                  branches:
                    - branch-compare-type: 'REG_EXP'
                      branch-pattern: '.*'
    notifications:
        - http:
            url: http://gotsvl1416.got.volvocars.net:3002/events
            format: json
            event: all
            timeout: 10000
            log: 0
    builders:
        - shell:
            !include-raw:
                - bootstrap_common_time_triggered.sh
                - bootstrap_progression_job.sh


    publishers:
        - raw:
            xml: |
                <jenkinsci.plugins.influxdb.InfluxDbPublisher plugin="influxdb@1.14">
                <selectedTarget>influxdb</selectedTarget>
                <customProjectName>icup_android_manifest_bump</customProjectName>
                <customPrefix>IhuManifestBump</customPrefix>
                </jenkinsci.plugins.influxdb.InfluxDbPublisher>
        - description-setter:
            regexp-for-failed: "fatal: (.*)"

