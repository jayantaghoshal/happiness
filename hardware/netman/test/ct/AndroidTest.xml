<?xml version="1.0" encoding="utf-8"?>
<!--
This tests verifies the functionallity in localconfig that copies the a default localconfig.json
file from /system/etc/ to /oem_config/localconfig on startup. We test this by deleting the
copied file and then issue a restart (timeout assumed to be 1 minute).
The test if the file exists is done in the actual test.
-->
<configuration description="Test standard ethernet is up with 198.18.34.1 after boot">
    <!-- Delete localconfig.json and reboot -->
    <target_preparer class="com.android.tradefed.targetprep.RunCommandTargetPreparer">
        <option name="run-command" value="rm /oem_config/localconfig/localconfig.json" />
    </target_preparer>

    <!-- Copy custom localconfig.json -->
    <target_preparer class="com.android.compatibility.common.tradefed.targetprep.FilePusher">
        <option name="cleanup" value="true" />
        <option name="push" value="DATA/localconfig_netmantest.json->/oem_config/localconfig/localconfig.json" />
    </target_preparer>

    <!-- Copy test case -->
    <target_preparer class="com.android.compatibility.common.tradefed.targetprep.FilePusher">
        <option name="cleanup" value="true" />
        <option name="push" value="VtsNetmanCTCases->/data/local/tmp/VtsNetmanCTCases" />
    </target_preparer>

    <target_preparer class="com.android.tradefed.targetprep.TimeWaster">
      <option name="reboot-before-sleep" value="true"/>
      <option name="delay" value="60000" />
    </target_preparer>

    <!-- Run test -->
    <test class="com.android.tradefed.testtype.GTest" >
        <option name="native-test-device-path" value="/data/local/tmp" />
        <option name="module-name" value="VtsNetmanCTCases" />
        <option name="runtime-hint" value="20s" />
    </test>
</configuration>
