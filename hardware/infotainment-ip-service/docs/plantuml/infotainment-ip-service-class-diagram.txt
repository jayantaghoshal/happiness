@startuml

class main as "main"
class CommonApiCxx as "CommonAPI C++"
'class MainLoop as "MainLoop"
'class cedric_localconfig as "Cedric_LocalConfig"
class ServiceManager

class IpService

package "libipcommandbus" {
class MessageDispatcher
class TransportServices
class IDiagnostics
}

package "libasn1" {
class InfotainmentIpBus as "InfotainmentIpBus (gen)"
class asn_base
}

package "Enhanced Position (D.R.)" {
class Generated_EnhancedPositionProxy as "EnhancedPositionProxy (gen)"
class EnhancedPosClient
}

package "Gnss (positioning)" {
class Generated_GnssServiceStub as "GnssServiceStub (gen)"
class GnssServiceStub as "GnssServiceStub (impl)"
class GnssService
}

package "Link Manager" {
class Generated_IplmServiceStub as "IplmServiceStub (gen)"
class IplmServiceStub as "IplmServiceStub (impl)"
interface IIpLmService
class IplmService
}

package "Ota" {
class Generated_OtaServiceStub as "OtaServiceStub (gen)"
class OtaServiceStub as "OtaServiceStub (impl)"
interface IOtaService
class OtaService
}

package "Wlan" {
class Generated_WlanServiceStub as "WlanServiceStub (gen)"
class WlanServiceStub as "WlanServiceStub (impl)"
interface IWlanService
class WlanService
}

package "Connectivity" {
class Generated_SourceSelectorBackendProxy as "SourceSelectorBackendProxy (gen)"
class Generated_ConnectivityServiceStub as "ConnectivityServiceStub (gen)"
class ConnectivityServiceStub as "ConnectivityServiceStub (impl)"
interface IConnectivityService
class ConnectivityService
class Connectivity
}

package "Diagnostics" {
class Generated_DiagnosticsProxy as "DiagnosticsProxy (gen)"
class DiagnosticsClient
}


main --* ServiceManager

main --* MessageDispatcher
main --*TransportServices

CommonApiCxx <-- ServiceManager

ServiceManager --* EnhancedPosClient
ServiceManager --* GnssService
ServiceManager --* IplmService
ServiceManager --* OtaService
ServiceManager --* WlanService
ServiceManager --* ConnectivityService

IpService --> MessageDispatcher

InfotainmentIpBus --> asn_base

CommonApiCxx <-- Generated_EnhancedPositionProxy
Generated_EnhancedPositionProxy *-- EnhancedPosClient
CommonApiCxx <-- EnhancedPosClient
EnhancedPosClient --|> IpService
EnhancedPosClient --> InfotainmentIpBus

CommonApiCxx <-- Generated_GnssServiceStub
Generated_GnssServiceStub <|-- GnssServiceStub
CommonApiCxx <-- GnssServiceStub 
GnssServiceStub *-- GnssService
GnssService --|> IpService
GnssService --> InfotainmentIpBus

CommonApiCxx <-- Generated_IplmServiceStub
Generated_IplmServiceStub <|-- IplmServiceStub
CommonApiCxx <-- IplmServiceStub 
IplmServiceStub *-- IplmService
IplmServiceStub *-- IIpLmService
IIpLmService <|-- IplmService
LinkManager --|> IpService
LinkManager --> InfotainmentIpBus

CommonApiCxx <-- Generated_OtaServiceStub
Generated_OtaServiceStub <|-- OtaServiceStub
CommonApiCxx <-- OtaServiceStub 
OtaServiceStub *-- OtaService
OtaServiceStub --* IOtaService
IOtaService <|-- OtaService
OtaService --|> IpService
OtaService --> InfotainmentIpBus

CommonApiCxx <-- Generated_WlanServiceStub
Generated_WlanServiceStub <|-- WlanServiceStub
CommonApiCxx <-- WlanServiceStub 
WlanServiceStub *-- WlanService
WlanServiceStub --* IWlanService
IWlanService <|-- WlanService
WlanService --|> IpService
WlanService --> InfotainmentIpBus

CommonApiCxx <-- Generated_ConnectivityServiceStub
Generated_ConnectivityServiceStub <|-- ConnectivityServiceStub
CommonApiCxx <-- ConnectivityServiceStub 
ConnectivityServiceStub *-- ConnectivityService
ConnectivityServiceStub --* IConnectivityService
IConnectivityService <|-- ConnectivityService
CommonApiCxx <-- Generated_SourceSelectorBackendProxy
Generated_SourceSelectorBackendProxy *-- ConnectivityService
CommonApiCxx <-- ConnectivityService
ConnectivityService --* Connectivity
Connectivity --|> IpService
Connectivity --> InfotainmentIpBus

CommonApiCxx <-- Generated_DiagnosticsProxy
Generated_DiagnosticsProxy *-- DiagnosticsClient
CommonApiCxx <-- DiagnosticsClient
DiagnosticsClient --|> IpService
DiagnosticsClient --|> IDiagnostics
DiagnosticsClient --> InfotainmentIpBus


MessageDispatcher --* TransportServices

MessageDispatcher --* IDiagnostics
TransportServices --* IDiagnostics

@enduml
